version: "2.4"

services:
  aa_setup:
    ports: [ "8545:8545" ]
    network_mode: "host"
    build:
      context: .
      dockerfile: Dockerfile

  alto_bundler:
    image: ghcr.io/pimlicolabs/alto
    ports: [ "3000:3000" ]
    network_mode: "host"
    environment:
      - ALTO_NETWORK_NAME=local
      - ALTO_ENTRY_POINT=0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789
      - ALTO_RPC_URL=http://127.0.0.1:8545
      - ALTO_MIN_BALANCE=0
      - ALTO_UTILITY_PRIVATE_KEY=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80 # anvil default key 0
      - ALTO_SIGNER_PRIVATE_KEYS=0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d # anvil default key 1
      - ALTO_PORT=4337
    depends_on:
      aa_setup:
        condition: service_completed_successfully
